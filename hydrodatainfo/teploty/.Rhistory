offset = 5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-03-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-04-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-04-09 00:00:00'
offset = -5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-04-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-04-17 00:00:00'
offset = 5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-04-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-05-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-06-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-06-01 00:00:00'
offset = 5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-06-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-06-27 00:00:00'
offset = -5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-06-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-07-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-07-03 00:00:00'
offset = 5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-07-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-07-11 00:00:00'
offset = -5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-07-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-07-13 00:00:00'
offset = 5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-07-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
fixed_data <- data.frame(datum=chmu$datum, teplota_fixed=chmu$fixed)
file_fixed <- paste("fixed_", site_chmu, ".txt",sep='')
write.table(fixed_data, file_fixed, row.names=FALSE, sep='\t')
library(sp)
mysiteid <- 1006
pti <- which(sites$id==mysiteid)
pt <- cbind(sites$lon[pti],sites$lat[pti])
pts <- cbind(sites$lon, sites$lat)
sites2 <- sites
sites2$dist = spDistsN1(pts, pt, longlat=TRUE)
sites2ind <- which(sites2$operator != 'PVL')
sitesfilter <- sites2[sites2ind,]
sortedind <- order(sitesfilter$dist)
sites2sorted <- sitesfilter[sortedind,]
View(sites2sorted)
#This workaround is necessary for correctly reading hours!
Sys.setenv(TZ="GMT")
site_chmu = 1006
site_povodi = 533
od = '2012-06-10'
do = '2013-08-01'
datatype <- c("POSIXct")
names(datatype) <- c("datum")
file_chmu <- paste("site_", site_chmu, ".txt",sep='')
file_povodi <- paste("fixed_", site_povodi, ".txt",sep='')
chmu <- read.table(file_chmu, sep='\t', header=TRUE, colClasses=datatype)
povodi <- read.table(file_povodi, sep='\t', header=TRUE, colClasses=datatype)
#prevod datumu, pridani sloupce pro hodinu
chmu$hour <- (as.POSIXlt(chmu$datum))$hour
povodi$hour <- (as.POSIXlt(povodi$datum))$hour
diff = 0
offset = 0 #can be 5, 10, 15, 20, 25, 30..
maxdiff = 3.5
maxdiff2 = 7.0
#prvni den, teplotu nemenime..
startindex = 2
endindex = 25
chmu$fixed = chmu$teplota
chmu$povodi = povodi$teplota
maxi <- length(chmu$teplota)
numdays <- floor(maxi/24)
for(day in 1:numdays) {
startindex <- day * 24 + 2
endindex <- startindex + 23
#first check the rapid change offset
val_yesterday <- chmu$fixed[startindex-1]
val_today <- chmu$teplota[startindex]
if ((!is.na(val_yesterday)) & (!is.na(val_today))) {
offset = 5 * round((val_today-val_yesterday) / 5)
chmu$fixed[startindex:endindex] = chmu$fixed[startindex:endindex] - offset
}
}
na_indexes = which(is.na(chmu$teplota))
chmu$fixed[na_indexes] = NA
idx_summer = which(chmu$datum > as.POSIXct('2013-06-01'))
chmu$fixed[idx_summer] = chmu$teplota[idx_summer]
idx_su2 = which(chmu$datum > as.POSIXct('2012-06-01') & chmu$datum < as.POSIXct('2012-08-01'))
chmu$fixed[idx_su2] = chmu$teplota[idx_su2]
plotmin = as.POSIXct('2012-06-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2012-07-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2012-08-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2012-09-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2012-10-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2012-10-24 00:00:00'
offset = -5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2012-10-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2012-11-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2012-11-14 00:00:00'
offset = -5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
from = '2012-11-17 00:00:00'
offset = 5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2012-11-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2012-12-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-01-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-02-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
idx_feb = which(chmu$datum > as.POSIXct('2013-02-09') & chmu$datum < as.POSIXct('2013-02-14'))
chmu$fixed[idx_feb] = chmu$fixed[idx_feb] -5
plotmin = as.POSIXct('2013-02-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-02-22 00:00:00'
offset = -5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-02-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-03-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-04-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-04-17 00:00:00'
offset = 10
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-04-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-05-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-05-16 00:00:00'
offset = 5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-05-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-06-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
from = '2013-06-01 00:00:00'
offset = -5
idx = which(chmu$datum >= as.POSIXct(from))
chmu$fixed[idx] = chmu$fixed[idx] + offset
plotmin = as.POSIXct('2013-06-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
plotmin = as.POSIXct('2013-07-01')
plotmax = plotmin + 86400 * 31
subset = which(chmu$datum > plotmin & chmu$datum < plotmax)
subset2 = which(povodi$datum > plotmin & povodi$datum < plotmax)
ymin = round(min(chmu$fixed[subset],na.rm=TRUE))
ymax = round(max(chmu$fixed[subset],na.rm=TRUE))
plot(chmu$datum[subset], chmu$datum[subset], type="l",ylim=c(-20,30))
lines(chmu$datum[subset], chmu$fixed[subset],col="red")
lines(povodi$datum[subset2], povodi$teplota[subset2],col="green")
abline(a=0,b=0)
chmu_subset <- chmu[subset,]
fixed_data <- data.frame(datum=chmu$datum, teplota_fixed=chmu$fixed)
file_fixed <- paste("fixed_", site_chmu, ".txt",sep='')
write.table(fixed_data, file_fixed, row.names=FALSE, sep='\t')
boltz = 5.67*10^-8
boltz
S1=1370+1370*0.03
S1
S2 = 1370 - 1370*0.03
S2
T1 = (S1/(boltz*0.69))^0.25
T1
T1 = S1 * pi * 6378^2 * 0.69
T1
T1 = [(S1 * 0.69)/ (4*pi*6378*boltz)]^0.25
T1 = ( (S1 * 0.69)/ (4*pi*6378*boltz) )^0.25
T1
T1 = ( (S1)/ (4*pi*6378*boltz) )^0.25
T1
T1 = ( (S1)/ (0.69*4*pi*6378*boltz) )^0.25
T1
T1 = ( (S1*0.69)/ (4*boltz) )^0.25
T1
T2 = ( (S2*0.69)/ (4*boltz) )^0.25
T2
T1 - T2
S
S = 1370
T = ( (S*0.69)/ (4*boltz) )^0.25
T
T - 274.15
